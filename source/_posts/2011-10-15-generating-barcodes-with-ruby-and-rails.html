---
layout: post
title: "Generating barcodes with ruby and rails"
date: 2011-10-15
comments: false
categories:
 - ruby
 - rails
---

<div class='post'>
Recently I had to convert some functionality from an old MS Access system to a Ruby on Rails application.&nbsp;The Access system generated a report that included a barcode; they were using a barcode font installed on the&nbsp;machine running access. I figured generating the barcode server side in the web app was going to be much nicer than installing barcode fonts on the client browsers. And since this is Ruby, I figured...<br /><blockquote><i><span class="Apple-style-span" style="font-size: large;">There must be a gem for that&nbsp;</span></i></blockquote>Sure enough, the barby gem. It allows you to output your barcode as png, gif, svg, pdf, etc...<br /><br />In my case I generated png barcodes and included image references to those in my view files.<br /><br />Sample code<br /><br /><script src="https://gist.github.com/1289751.js?file=using_barby_to_generate_barcodes_with_ruby.rb"></script><br /><noscript><br /># Gemfile, run bundle install after adding<br />gem 'barby'<br />gem 'chunky_png'<br /><br /># some code to generate the png file using 3 of 9 barcode style<br />require 'barby'<br />require 'barby/barcode/code_39'<br />require 'barby/outputter/png_outputter'<br /><br />barcode_value = "099999333"<br />full_path = "/somewhere/barcode_#{barcode_value}.png"<br />barcode = Barby::Code39.new(barcode_value)<br />File.open(full_path, 'w') { |f| f.write barcode.to_png(:margin => 3, :xdim => 2, :height => 55) }<br /></noscript><br /><br />There is no pixel setting, it uses some other type of unit to determine size; using the xdim, margin and height options&nbsp;you can tweak the size, but I found that it was not very precise - <i>for my use case it was good enough.</i><br /><br />The generated barcode does not include the value, it is just the image which can be scanned using a&nbsp;barcode scanner, but it would be nice if there was an option to include the value below that. This is somewhat trivial to add in your view using html.<br /><br />Overall I was really pleased with this gem!<br /><br />Resources<br /><ul><li><a href="http://toretore.eu/barby/">http://toretore.eu/barby/</a></li><li><a href="https://github.com/toretore/barby">https://github.com/toretore/barby</a></li><li><a href="http://barby.rubyforge.org/rdoc/">http://barby.rubyforge.org/rdoc/</a></li><li><a href="http://groups.google.com/group/ruby-barby">http://groups.google.com/group/ruby-barby</a></li></ul></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>House 9</div>
<div class='content'>
As far as i know the gem does not support that feature. You need to add that text to your pdf, html, etc... Might want to check the google groups link above for additional help</div>
</div>
<div class='comment'>
<div class='author'>Icaro</div>
<div class='content'>
Perfect, thanks. How can i display the value at the bottom of the same image?</div>
</div>
<div class='comment'>
<div class='author'>House 9</div>
<div class='content'>
Try setting your path to &quot;#{Rails.root}/public/barcodes&quot;</div>
</div>
<div class='comment'>
<div class='author'>Icaro</div>
<div class='content'>
Im getting <br />No such file or directory - /public/barcodes/barcode_BARBY.png<br /><br />Is there anyway to not to create the png and then display it from public resources? like streaming each time i call a coupon for instance?.<br /><br />Thanks</div>
</div>
</div>
